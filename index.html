<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" defer></script>
    <title>Roteiro Final: Porto 22/04-24/04 (com pernoite estendida)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .content-wrapper {
            display: flex;
            gap: 20px;
        }

        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 20px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            flex: 1;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background-color: #e9ecef;
        }

        .tab-button.active {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }

        /* Estilos do Container do Mapa */
        .map-container {
            width: 70%;
            position: relative;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f8f9fa;
            aspect-ratio: 4/3;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        /* Estilos dos Marcadores e Popups do Leaflet */
        .leaflet-popup-content {
            font-size: 14px;
            line-height: 1.4;
            padding: 8px;
        }

        .leaflet-popup-content h3 {
            margin: 0 0 5px 0;
            color: #2c3e50;
            font-size: 16px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 3px;
        }

        .custom-marker {
            background-color: #e74c3c;
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
        }

        .custom-marker:hover {
            background-color: #c0392b;
            transform: scale(1.2);
        }

        .custom-marker.active {
            background-color: #2ecc71;
            box-shadow: 0 0 0 4px rgba(46, 204, 113, 0.3);
        }

        /* Painel de Informações */
        .info-panel {
            width: 30%;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #ddd;
            max-height: 800px;
            overflow-y: auto;
        }

        .city-info {
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .city-info h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        .info-section {
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }

        .booking-button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }

        .booking-button:hover {
            background-color: #2980b9;
        }

        /* Estilos do Itinerário */
        .itinerary-day {
            background-color: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .itinerary-day h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        .full-itinerary {
            display: none;
            padding: 20px;
        }

        /* Estilos do Resumo de Custos */
        .cost-summary {
            background-color: #f1f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .cost-summary h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 5px 0;
            border-bottom: 1px dashed #ccc;
        }

        .total-cost {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #3498db;
            font-weight: bold;
            font-size: 1.2em;
        }

        /* Estilos para as opções de transporte */
        .transport-options {
            margin-top: 10px;
        }

        .transport-option {
            background-color: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }

        .transport-train {
            border-left-color: #2ecc71;
        }

        .transport-bus {
            border-left-color: #f39c12;
        }

        .transport-flight {
            border-left-color: #9b59b6;
        }

        .transport-car {
            border-left-color: #e74c3c;
        }

        .transport-option h4 {
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .transport-option p {
            margin: 5px 0;
            font-size: 14px;
        }

        .economy-badge, .comfort-badge, .time-badge {
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 10px;
        }

        .economy-badge {
            background-color: #2ecc71;
            color: white;
        }

        .comfort-badge {
            background-color: #9b59b6;
            color: white;
        }

        .time-badge {
            background-color: #f39c12;
            color: white;
        }

        /* Resumo visual dos custos */
        .cost-charts {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }

        .chart-container {
            width: 45%;
            min-width: 300px;
            border-radius: 8px;
            background-color: white;
            padding: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Responsividade */
        @media (max-width: 1200px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .map-container, .info-panel {
                width: 100%;
            }
            
            .map-container {
                height: 400px;
            }

            .chart-container {
                width: 100%;
            }
        }

        /* Estilos adicionados para transporte */
        .transport-recommended {
            font-weight: bold;
            color: #27ae60;
        }

        .budget-overview {
            background-color: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .budget-overview.over-budget {
            background-color: #e74c3c;
        }

        .budget-overview h3 {
            color: white;
            margin-bottom: 10px;
        }

        .budget-meter {
            height: 24px;
            background-color: #eee;
            border-radius: 12px;
            overflow: hidden;
            margin: 10px 0;
        }

        .budget-fill {
            height: 100%;
            background-color: #3498db;
            width: 0%; /* Será ajustado com JavaScript */
            transition: width 1s ease-in-out;
        }

        .budget-over {
            background-color: #e74c3c;
        }

        .budget-within {
            background-color: #2ecc71;
        }

        /* Destaque para Tobogã */
        .highlight-attraction {
            background-color: #fef9e7;
            border-left: 4px solid #f1c40f;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .highlight-attraction h4 {
            color: #d35400;
            margin-bottom: 8px;
        }

        .highlight-attraction img {
            max-width: 100%;
            border-radius: 4px;
            margin: 10px 0;
        }

        /* Novo estilo para destacar os dias extras */
        .extra-day {
            background-color: #e8f8f5;
            border-left: 4px solid #1abc9c;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .extra-day h4 {
            color: #16a085;
            margin-bottom: 8px;
        }

        /* Estilo para comparação antes/depois */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .comparison-table th, 
        .comparison-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .comparison-table th {
            background-color: #f2f2f2;
        }

        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .highlight-row {
            background-color: #e8f8f5 !important;
        }
        
        /* Estilo para destaque da Holanda */
        .holland-highlight {
            background-color: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .holland-highlight h4 {
            color: #2980b9;
            margin-bottom: 8px;
        }
        
        /* Estilo para Portugal */
        .portugal-highlight {
            background-color: #f2d7d5;
            border-left: 4px solid #c0392b;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .portugal-highlight h4 {
            color: #922b21;
            margin-bottom: 8px;
        }
        
        /* Estilo para economias */
        .savings-highlight {
            background-color: #ebf5e8;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .savings-highlight h4 {
            color: #27ae60;
            margin-bottom: 8px;
        }

        /* NOVOS ESTILOS PARA AS MELHORIAS */
        .info-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
            border-bottom: 1px solid #ddd;
        }

        .info-tab {
            padding: 8px 15px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            cursor: pointer;
            font-size: 14px;
        }

        .info-tab.active {
            background-color: #3498db;
            color: white;
        }

        .info-content {
            display: none;
            padding: 15px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none;
            margin-bottom: 15px;
        }

        .info-content.active {
            display: block;
        }

        .phrase-box {
            background-color: #f1f8ff;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .phrase-item {
            margin: 5px 0;
        }

        .phrase-item strong {
            color: #3498db;
        }

        .cultural-item {
            background-color: #f5f9f8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .cultural-title {
            color: #16a085;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .checklist-container {
            background-color: #f9f9f9;
            padding: 12px;
            border-radius: 6px;
        }

        .checklist-category {
            margin-top: 10px;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            margin: 4px 0;
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 8px;
        }

        .challenges-list {
            background-color: #fef9e7;
            padding: 12px;
            border-radius: 6px;
        }

        .challenge-item {
            padding: 6px 0;
            border-bottom: 1px dashed #f1c40f;
        }

        .challenge-item:last-child {
            border-bottom: none;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .info-block {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }

        .info-block h4 {
            color: #3498db;
            margin-bottom: 5px;
        }

        .currency-box {
            background-color: #e8f6f3;
            padding: 8px;
            border-radius: 4px;
            display: inline-block;
            margin-right: 10px;
        }

        .countdown-container {
            background-color: #3498db;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
        }

        .countdown-value {
            font-size: 28px;
            font-weight: bold;
        }

        .countdown-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .practical-info {
            background-color: #f0f4f8;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .practical-title {
            color: #2980b9;
            font-weight: bold;
            margin-bottom: 6px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Roteiro Final Lua de Mel 2025</h1>
        
        <!-- Contador regressivo para a viagem -->
        <div class="countdown-container">
            <div class="countdown-value" id="countdown">---</div>
            <div class="countdown-label">dias para sua lua de mel</div>
        </div>
        
        <div class="tab-buttons">
            <button class="tab-button active" data-tab="map" onclick="showTab('map')">Mapa</button>
            <button class="tab-button" data-tab="full-itinerary" onclick="showTab('full-itinerary')">Roteiro Completo</button>
            <button class="tab-button" data-tab="summary" onclick="showTab('summary')">Resumo Financeiro</button>
            <button class="tab-button" data-tab="packing" onclick="showTab('packing')">Checklist de Viagem</button>
            <button class="tab-button" data-tab="romantic" onclick="showTab('romantic')">Desafios Românticos</button>
        </div>
        
        <div class="content-wrapper" id="mapView">
            <div class="map-container">
                <div id="map"></div>
            </div>
            <div class="info-panel" id="infoPanel">
                <div id="cityInfo">
                    Selecione uma cidade no mapa para ver detalhes
                </div>
            </div>
        </div>

        <div class="full-itinerary" id="fullItinerary"></div>
        
        <!-- Nova seção para checklist de viagem -->
        <div class="full-itinerary" id="packingList" style="display: none;">
            <h2 style="text-align: center; margin-bottom: 20px;">Checklist de Viagem</h2>
            
            <div class="checklist-container">
                <h3>Documentos Essenciais</h3>
                <div class="checklist-category">Documentos</div>
                <div class="checklist-item"><input type="checkbox" id="passport"><label for="passport">Passaportes (validade mínima 6 meses)</label></div>
                <div class="checklist-item"><input type="checkbox" id="tickets"><label for="tickets">Bilhetes/reservas de voos</label></div>
                <div class="checklist-item"><input type="checkbox" id="insurance"><label for="insurance">Seguro viagem (imprimir apólice)</label></div>
                <div class="checklist-item"><input type="checkbox" id="license"><label for="license">Carteira de motorista internacional</label></div>
                <div class="checklist-item"><input type="checkbox" id="copies"><label for="copies">Cópias digitais de todos os documentos</label></div>
                <div class="checklist-item"><input type="checkbox" id="cards"><label for="cards">Cartões de crédito/débito internacionais</label></div>
                <div class="checklist-item"><input type="checkbox" id="visa-card"><label for="visa-card">Informar banco sobre viagem internacional</label></div>
                
                <div class="checklist-category">Roupas (Primavera Europeia)</div>
                <div class="checklist-item"><input type="checkbox" id="tshirts"><label for="tshirts">Camisetas leves (5-7)</label></div>
                <div class="checklist-item"><input type="checkbox" id="pants"><label for="pants">Calças/jeans (2-3)</label></div>
                <div class="checklist-item"><input type="checkbox" id="jacket"><label for="jacket">Casaco impermeável leve</label></div>
                <div class="checklist-item"><input type="checkbox" id="sweater"><label for="sweater">Suéter/moletom (2-3 para camadas)</label></div>
                <div class="checklist-item"><input type="checkbox" id="shoes"><label for="shoes">Sapatos confortáveis para caminhada</label></div>
                <div class="checklist-item"><input type="checkbox" id="smartclothes"><label for="smartclothes">Roupa social básica para restaurantes</label></div>
                <div class="checklist-item"><input type="checkbox" id="socks"><label for="socks">Meias (7+ pares)</label></div>
                <div class="checklist-item"><input type="checkbox" id="swimwear"><label for="swimwear">Roupa de banho (para spa na Suíça)</label></div>
                
                <div class="checklist-category">Tecnologia</div>
                <div class="checklist-item"><input type="checkbox" id="adapter"><label for="adapter">Adaptadores de tomada (Tipo C para Europa e Tipo J para Suíça)</label></div>
                <div class="checklist-item"><input type="checkbox" id="chargers"><label for="chargers">Carregadores de celular/câmera</label></div>
                <div class="checklist-item"><input type="checkbox" id="powerbank"><label for="powerbank">Powerbank (carregador portátil)</label></div>
                <div class="checklist-item"><input type="checkbox" id="camera"><label for="camera">Câmera com cartão de memória extra</label></div>
                <div class="checklist-item"><input type="checkbox" id="earphones"><label for="earphones">Fones de ouvido</label></div>
                
                <div class="checklist-category">Higiene e Saúde</div>
                <div class="checklist-item"><input type="checkbox" id="medications"><label for="medications">Medicamentos de uso contínuo</label></div>
                <div class="checklist-item"><input type="checkbox" id="firstaid"><label for="firstaid">Kit básico de primeiros socorros</label></div>
                <div class="checklist-item"><input type="checkbox" id="sunscreen"><label for="sunscreen">Protetor solar</label></div>
                <div class="checklist-item"><input type="checkbox" id="toiletries"><label for="toiletries">Produtos básicos de higiene</label></div>
                <div class="checklist-item"><input type="checkbox" id="mask"><label for="mask">Máscaras (opcional para ambientes fechados)</label></div>
                <div class="checklist-item"><input type="checkbox" id="sanitizer"><label for="sanitizer">Álcool gel</label></div>
                
                <div class="checklist-category">Extras específicos para seu roteiro</div>
                <div class="checklist-item"><input type="checkbox" id="backpack"><label for="backpack">Mochila pequena para passeios diários</label></div>
                <div class="checklist-item"><input type="checkbox" id="notebook"><label for="notebook">Caderninho para anotações da viagem</label></div>
                <div class="checklist-item"><input type="checkbox" id="waterproof"><label for="waterproof">Capa impermeável para celular/câmera (Gerês e passeios aquáticos)</label></div>
                <div class="checklist-item"><input type="checkbox" id="hikingshoes"><label for="hikingshoes">Calçados adequados para trilhas em Gerês</label></div>
                <div class="checklist-item"><input type="checkbox" id="waterbottle"><label for="waterbottle">Garrafa de água reutilizável (economia e sustentabilidade)</label></div>
            </div>
        </div>
        
        <!-- Nova seção para desafios românticos -->
        <div class="full-itinerary" id="romanticChallenges" style="display: none;">
            <h2 style="text-align: center; margin-bottom: 20px;">Desafios Românticos para a Lua de Mel</h2>
            
            <p style="text-align: center; margin-bottom: 30px;">Completem estes desafios durante a viagem para criar memórias inesquecíveis juntos!</p>
            
            <div class="challenges-list">
                <div class="challenge-item">
                    <h4>Desafio #1: Álbum de Momentos</h4>
                    <p>Tirem uma selfie romântica em cada cidade visitada, sempre no mesmo horário do dia. Ao final, terão um álbum com a evolução da viagem.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #2: Brinde Cultural</h4>
                    <p>Façam um brinde com uma bebida típica de cada país (vinho do porto em Portugal, cerveja na Holanda, etc.) e anotem suas impressões.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #3: Postais do Futuro</h4>
                    <p>Em cada cidade, escrevam um cartão postal para vocês mesmos com planos para o futuro. Enderecem para sua casa e leiam quando voltarem.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #4: Pontes de Amor</h4>
                    <p>Porto tem a Ponte Dom Luís I, Amsterdam tem os canais. Beijem-se em cada ponte famosa que encontrarem no caminho.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #5: Tesouros Secretos</h4>
                    <p>Em cada cidade, comprem uma pequena lembrança que simbolize aquele momento da viagem. No aniversário de casamento, troquem esses presentes.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #6: Piquenique Romântico</h4>
                    <p>Façam um piquenique romântico em Gerês, no Vondelpark em Amsterdam ou em algum parque em Zurich.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #7: Estrelas da Suíça</h4>
                    <p>Na Suíça, dediquem uma noite para observar as estrelas juntos nas montanhas, longe da poluição luminosa.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #8: Miniaturas do Destino</h4>
                    <p>Façam desenhos miniatura (mesmo que simples) de algo que viram em cada cidade. Guardem no diário de viagem.</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #9: Gastronomia Criativa</h4>
                    <p>Em cada país, experimentem algo que nunca provaram antes. Tirem foto para registrar as reações!</p>
                </div>
                
                <div class="challenge-item">
                    <h4>Desafio #10: A Carta Secreta</h4>
                    <p>Cada um escreve uma carta romântica antes da viagem. Abram as cartas em um momento especial em Gerês, em meio à natureza.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const itineraryData = {
            cities: {
                albufeira: {
                    name: "Albufeira (Casamento)",
                    coordinates: { lat: 37.0891, lng: -8.2401 },
                    dates: "12/04 - 14/04",
                    activities: [
                        "Chegada a Albufeira (12/04)",
                        "Casamento (13/04)",
                        "Preparação para próximo destino (14/04)"
                    ],
                    accommodation: {
                        name: "Hospedagem já confirmada",
                        cost: 0, // Já pago/reservado
                        notes: "Hospedagem já confirmada para estas datas"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 15-22°C, possibilidade de alguns dias nublados com chuvas leves.",
                        language: [
                            { phrase: "Olá", pronunciation: "o-LA" },
                            { phrase: "Obrigado/a", pronunciation: "o-bri-GA-do/da" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "Onde fica...?", pronunciation: "ON-de FI-ca" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+1 (4 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (adaptador necessário para tomadas brasileiras)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Rede de ônibus urbanos Eva Transportes. Não há cartão específico, compre bilhetes avulsos.",
                        offlineMap: "Baixe o mapa de Albufeira no Maps.me ou Google Maps antes da viagem.",
                        internetAccess: "SIM cards pré-pagos disponíveis nas lojas MEO, Vodafone ou NOS nos shoppings.",
                        cityTransfers: "Estação central de ônibus para Sevilha fica a 10 minutos de taxi do centro (€8-10)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Festival Internacional de Esculturas de Areia (iniciando final de abril).",
                        food: "Experimente o peixe grelhado, cataplana de frutos do mar e o vinho do Algarve.",
                        freeActivities: "Free Walking Tour Albufeira sai da praça central às 10h (gorjeta sugerida: €10)."
                    }
                },
                madrid: {
                    name: "Madrid (Passagem)",
                    coordinates: { lat: 40.4168, lng: -3.7038 },
                    dates: "14/04 (visita de dia)",
                    transport: {
                        from: "Albufeira",
                        options: [
                            {
                                type: "onibus",
                                company: "FlixBus (noturno)",
                                duration: "10-12h",
                                cost: 35,
                                bookingUrl: "https://www.flixbus.pt",
                                notes: "Opção econômica e ecológica",
                                recommended: true,
                                badge: "economia"
                            },
                            {
                                type: "voo",
                                company: "Ryanair (Faro)",
                                duration: "1h45",
                                cost: 90,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Opção mais rápida, mas mais cara",
                                recommended: false,
                                badge: "tempo"
                            }
                        ]
                    },
                    activities: [
                        "Plaza de Cibeles (gratuito)",
                        "Exterior do Estádio Santiago Bernabéu (gratuito)",
                        "Puerta del Sol (gratuito)",
                        "Tempo para almoço típico espanhol"
                    ],
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 12-20°C, primavera com dias ensolarados e algumas chuvas ocasionais.",
                        language: [
                            { phrase: "Hola", pronunciation: "O-la" },
                            { phrase: "Gracias", pronunciation: "GRA-ssi-as" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "¿Dónde está...?", pronunciation: "DON-de es-TA" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (adaptador necessário para tomadas brasileiras)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Metro de Madrid e EMT (ônibus). Cartão Multi recarregável (€2,50) válido para todos transportes.",
                        offlineMap: "Madrid Metro offline disponível no app 'Metro Madrid Oficial'.",
                        internetAccess: "SIM cards nas lojas Movistar, Orange ou Vodafone (desde €10).",
                        cityTransfers: "Do centro ao terminal de ônibus Estación Sur: 30 min de metrô (linha 6)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Semana Santa (dependendo das datas) com procissões tradicionais.",
                        food: "Não perca o chocolate com churros no San Ginés, o Cocido madrileño e as tapas do Mercado San Miguel.",
                        freeActivities: "Free Walking Tour Madrid sai da Plaza Mayor às 11h e 15h (gorjeta sugerida: €12)."
                    }
                },
                valencia: {
                    name: "Valencia",
                    coordinates: { lat: 39.4699, lng: -0.3763 },
                    dates: "14/04 - 16/04",
                    transport: {
                        from: "Madrid",
                        options: [
                            {
                                type: "onibus",
                                company: "ALSA",
                                duration: "4h-4h30",
                                cost: 30,
                                bookingUrl: "https://www.alsa.es",
                                notes: "Opção mais econômica, recomendada",
                                recommended: true,
                                badge: "economia"
                            },
                            {
                                type: "trem",
                                company: "Renfe (AVE)",
                                duration: "1h40",
                                cost: 45,
                                bookingUrl: "https://www.renfe.com",
                                notes: "Trem de alta velocidade, muito confortável",
                                recommended: false,
                                badge: "conforto"
                            }
                        ]
                    },
                    activities: [
                        "L'Oceanogràfic (ingresso com desconto online: 35€ em vez de 40€)",
                        "Centro histórico de Valência (passeio gratuito)",
                        "Mercado Central (gratuito)",
                        "Praia de Malvarrosa (gratuita)",
                        "Jardins do Túria (antigo leito do rio, convertido em parque)"
                    ],
                    accommodation: {
                        name: "Red Nest Hostel (dormitório compartilhado)",
                        cost: 60,
                        bookingUrl: "https://www.hostelworld.com",
                        notes: "Localização central, cozinha para preparar refeições (2 noites)"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 13-23°C, clima temperado mediterrâneo, dias agradáveis.",
                        language: [
                            { phrase: "Hola", pronunciation: "O-la" },
                            { phrase: "Gracias", pronunciation: "GRA-ssi-as" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "¿Dónde está...?", pronunciation: "DON-de es-TA" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (adaptador necessário para tomadas brasileiras)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Metrovalencia (metrô) e EMT (ônibus). Cartão Móbilis (€2) + recarga.",
                        offlineMap: "App 'Valencia Guía' com mapas offline da cidade e transporte.",
                        internetAccess: "SIM cards pré-pagos nas lojas Yoigo, Orange ou Movistar.",
                        cityTransfers: "L'Oceanogràfic: 20 min de ônibus do centro (linhas 15, 35, 95)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Eventos pós-Fallas (principais festas em março).",
                        food: "Berços da paella - experimente a autêntica Paella Valenciana e a horchata com fartons.",
                        freeActivities: "Free Walking Tour Valencia sai da Plaza de la Virgen às 10:30h (gorjeta sugerida: €10)."
                    }
                },
                geneva: {
                    name: "Geneva",
                    coordinates: { lat: 46.2044, lng: 6.1432 },
                    dates: "16/04 - 18/04",
                    transport: {
                        from: "Valencia",
                        options: [
                            {
                                type: "voo",
                                company: "Conexão via Madrid/Barcelona",
                                duration: "4h-5h (incluindo conexão)",
                                cost: 80,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Reservando com antecedência para obter tarifas mais baixas",
                                recommended: true,
                                badge: "economia"
                            },
                            {
                                type: "voo",
                                company: "EasyJet (direto, se disponível)",
                                duration: "2h",
                                cost: 130,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Voo direto, opção mais rápida",
                                recommended: false,
                                badge: "tempo"
                            }
                        ]
                    },
                    activities: [
                        "Jet d'Eau (gratuito)",
                        "CERN (visita gratuita com reserva antecipada)",
                        "Passeio pelo lago Leman (gratuito)",
                        "Excursão de um dia a Les Diablerets (veja abaixo)",
                        "Catedral de São Pedro (entrada gratuita)"
                    ],
                    accommodation: {
                        name: "Couchsurfing",
                        cost: 30,
                        bookingUrl: "https://www.couchsurfing.com",
                        notes: "Taxa de agradecimento ao anfitrião (2 noites)"
                    },
                    special: {
                        title: "Tobogã Alpino em Les Diablerets (Glacier 3000)",
                        description: "Uma das melhores experiências da Suíça! O Alpine Coaster é um dos maiores tobogãs em trilhos da Europa, com 1000 metros de descida emocionante a velocidades de até 40 km/h. A pista serpenteante oferece vistas deslumbrantes das montanhas.",
                        details: [
                            "Localização: Glacier 3000, próximo a Les Diablerets (2h de Geneva)",
                            "Preço: 70€/pessoa (pacote básico com desconto online)",
                            "Duração: Excursão de dia inteiro (8h)",
                            "Melhor época: Funciona de maio a outubro (verificar disponibilidade para abril)",
                            "Alternativa em caso de fechamento: Tobogã no Monte Pilatus (perto de Lucerna)"
                        ],
                        image: "https://sample-image-url.com/toboga-suica.jpg",
                        bookingUrl: "https://www.glacier3000.ch"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 6-15°C, clima temperado, possibilidade de chuvas e ventos frios.",
                        language: [
                            { phrase: "Bonjour", pronunciation: "bõ-ZHUR" },
                            { phrase: "Merci", pronunciation: "mer-SI" },
                            { phrase: "S'il vous plaît", pronunciation: "sil vu PLE" },
                            { phrase: "Où est...?", pronunciation: "u E" }
                        ],
                        currency: "Franco Suíço (1 CHF ≈ R$6,20)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo J (adaptador específico para a Suíça é necessário)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "TPG (transporte público). Visitantes recebem cartão Geneva Transport Card GRATUITO no hotel.",
                        offlineMap: "Mapa offline no app 'Geneva Public Transport'.",
                        internetAccess: "SIM cards Swisscom ou Salt disponíveis no aeroporto (mais caros que média europeia).",
                        cityTransfers: "CERN: 40 min do centro via bonde 18 + ônibus 68."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Festival de Música de Genebra pode ocorrer em abril (verificar datas).",
                        food: "Experimente a fondue de queijo, raclette e filets de perche (peixe local).",
                        freeActivities: "Tour gratuito do CERN (reservar com antecedência online) e passeio no lago Léman."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        trainPass: "Swiss Travel Pass (3 dias): CHF 232 por pessoa. Economicamente viável se usar trens diariamente.",
                        tobogganInfo: "Alpine Coaster Glacier 3000: Funciona das 9h às 16:30h, fechado com vento forte ou chuva.",
                        romanticSpots: "Jantar fondue romântico no restaurante Les Armures na cidade velha (reservar com antecedência)."
                    }
                },
                pilatus: {
                    name: "Monte Pilatus (Tobogã)",
                    coordinates: { lat: 46.9794, lng: 8.2544 },
                    dates: "18/04",
                    transport: {
                        from: "Geneva",
                        options: [
                            {
                                type: "trem",
                                company: "SBB (via Lucerna)",
                                duration: "3h30",
                                cost: 55,
                                bookingUrl: "https://www.sbb.ch",
                                notes: "Trem regional com conexões",
                                recommended: true,
                                badge: "economia"
                            }
                        ]
                    },
                    activities: [
                        "Rodelbahn - Maior tobogã de trenó da Suíça (10€/descida com desconto online)",
                        "Teleférico panorâmico para o topo (40€ ida e volta, procurar promoções)",
                        "Vistas deslumbrantes dos Alpes Suíços (gratuito)",
                        "Caminhadas em trilhas panorâmicas (gratuito)"
                    ],
                    special: {
                        title: "Rodelbahn - O Maior Tobogã em Trilhos da Suíça",
                        description: "O tobogã alpino do Monte Pilatus é uma experiência única e emocionante, onde você controla sua própria velocidade descendo 1350 metros através de curvas, túneis e giros a velocidades de até 40km/h. É considerado um dos mais longos e espetaculares da Suíça.",
                        details: [
                            "Comprimento: 1350 metros de pura adrenalina",
                            "Localização: Monte Pilatus, próximo a Lucerna",
                            "Preço: 10€ por descida (com desconto online)",
                            "Altitude: Localizado a 1350m acima do nível do mar",
                            "Funcionamento: Disponível de abril a novembro (clima permitindo)"
                        ],
                        image: "https://sample-image-url.com/toboga-pilatus.jpg",
                        bookingUrl: "https://www.pilatus.ch"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 5-12°C, clima de montanha, mais frio e instável que nas cidades.",
                        language: [
                            { phrase: "Grüezi", pronunciation: "GRU-e-tsi" },
                            { phrase: "Danke", pronunciation: "DAN-ke" },
                            { phrase: "Bitte", pronunciation: "BI-te" },
                            { phrase: "Wo ist...?", pronunciation: "vo IST" }
                        ],
                        currency: "Franco Suíço (1 CHF ≈ R$6,20)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo J (adaptador específico para a Suíça é necessário)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Trem SBB até Lucerna, depois opções de ônibus, barco ou trem cremalheira.",
                        offlineMap: "App 'SBB Mobile' com mapas e horários offline.",
                        internetAccess: "Cobertura irregular nas áreas montanhosas. Baixe mapas antes.",
                        cityTransfers: "Da estação de Lucerna até a estação de trem cremalheira do Pilatus: 10 min a pé."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Possíveis eventos locais de primavera em Lucerna (verificar datas).",
                        food: "Experimente o Älplermagronen (macarrão dos Alpes) em restaurantes de montanha.",
                        freeActivities: "Trilhas gratuitas no entorno da montanha com vistas panorâmicas."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        weatherAlert: "Clima montanhoso muito imprevisível. Antes de subir, verifique as condições no centro de visitantes. Leve roupas quentes mesmo em dias aparentemente ensolarados.",
                        bestPhoto: "O melhor horário para fotos é pela manhã (9-11h), quando o céu costuma estar mais limpo."
                    }
                },
                zurich: {
                    name: "Zurich",
                    coordinates: { lat: 47.3769, lng: 8.5417 },
                    dates: "18/04 - 20/04", // ATUALIZADO
                    transport: {
                        from: "Pilatus",
                        options: [
                            {
                                type: "trem",
                                company: "SBB (via Lucerna)",
                                duration: "1h30",
                                cost: 40,
                                bookingUrl: "https://www.sbb.ch",
                                notes: "Conexão confortável via Lucerna",
                                recommended: true,
                                badge: "tempo"
                            }
                        ]
                    },
                    activities: [
                        "Lago Zurich (passeio gratuito)",
                        "Bahnhofstrasse (vitrine-shopping gratuito)",
                        "Lindenhof (mirante gratuito)",
                        "Passeio pelo centro histórico (gratuito)",
                        "Excursão a Lucerna (cidade próxima: trem 25€ ida e volta)",
                        "Uetliberg - Montanha de Zurich (transporte + trilha: 15€)"
                    ],
                    accommodation: {
                        name: "Airbnb compartilhado",
                        cost: 150,
                        bookingUrl: "https://www.airbnb.com",
                        notes: "Apartamento compartilhado com cozinha para economia em refeições (2 noites)"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 5-15°C, início da primavera, possibilidade de chuvas e alguns dias ensolarados.",
                        language: [
                            { phrase: "Grüezi", pronunciation: "GRU-e-tsi" },
                            { phrase: "Danke", pronunciation: "DAN-ke" },
                            { phrase: "Bitte", pronunciation: "BI-te" },
                            { phrase: "Wo ist...?", pronunciation: "vo IST" }
                        ],
                        currency: "Franco Suíço (1 CHF ≈ R$6,20)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo J (adaptador específico para a Suíça é necessário)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "ZVV (transporte integrado). ZVV Day Pass (24h) custa CHF 17,20.",
                        offlineMap: "App 'ZVV' com mapas e horários offline.",
                        internetAccess: "SIM cards Swisscom, Sunrise ou Salt (desde CHF 20).",
                        cityTransfers: "Uetliberg: 25 min do centro via trem S10 da estação principal."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Sechseläuten (festival tradicional de primavera, verificar datas).",
                        food: "Prove o Zürcher Geschnetzeltes (carne em tiras com molho cremoso), fondue e os chocolates Sprüngli.",
                        freeActivities: "Free Walking Tour Zurich sai do Paradeplatz às 11h (gorjeta sugerida: CHF 15)."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        trainPass: "Swiss Travel Pass também válido. Trem para Lucerna: CHF 25 (ida) por pessoa.",
                        mountainInfo: "Uetliberg: Acessível todo o ano. Vista panorâmica de Zurich. Restaurante no topo.",
                        romanticSpots: "Pôr do sol em Lindenhof com vista para o rio Limmat e aperitivo no Frau Gerolds Garten."
                    }
                },
                amsterdam: {
                    name: "Amsterdam",
                    coordinates: { lat: 52.3676, lng: 4.9041 },
                    dates: "20/04 - 22/04", // ATUALIZADO
                    transport: {
                        from: "Zurich",
                        options: [
                            {
                                type: "onibus",
                                company: "FlixBus (noturno)",
                                duration: "11-13h",
                                cost: 50,
                                bookingUrl: "https://www.flixbus.com",
                                notes: "Opção econômica, viagem noturna poupa uma diária de hotel",
                                recommended: true,
                                badge: "economia"
                            },
                            {
                                type: "voo",
                                company: "Swiss/KLM (direto)",
                                duration: "1h40",
                                cost: 110,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Várias opções de voos diretos por dia",
                                recommended: false,
                                badge: "tempo"
                            },
                            {
                                type: "trem",
                                company: "Conexões via Alemanha",
                                duration: "8h-9h",
                                cost: 150,
                                bookingUrl: "https://www.raileurope.com",
                                notes: "Longo mas com paisagens bonitas",
                                recommended: false
                            }
                        ]
                    },
                    activities: [
                        "Keukenhof (Parque de Tulipas: 16€ por pessoa com desconto online)",
                        "Transporte público + barco para Giethoorn (40€ ida e volta)",
                        "Passeio de barco pelos canais (15€)",
                        "Free Walking Tour pelo centro (gorjeta de 5-10€)",
                        "Vondelpark (gratuito)",
                        "Mercado de flores flutuante (gratuito para visitar)"
                    ],
                    accommodation: {
                        name: "MEININGER Hostel",
                        cost: 80,
                        bookingUrl: "https://www.meininger-hotels.com",
                        notes: "Dormitório compartilhado, cozinha disponível (2 noites)"
                    },
                    special: {
                        title: "Giethoorn - A Veneza do Norte",
                        description: "Uma vila encantadora nos Países Baixos conhecida por seus canais, pontes e ausência quase total de ruas. Quase todos os deslocamentos são feitos de barco ou a pé através de pequenas pontes que cruzam os canais.",
                        details: [
                            "Visite por conta própria usando transporte público",
                            "Trem + ônibus de Amsterdam para Giethoorn (2 horas)",
                            "Aluguel de barco local para explorar canais (15€/hora)",
                            "Uma das vilas mais fotogênicas da Europa",
                            "Preço total: 40€ por pessoa (muito mais econômico que excursões organizadas)"
                        ],
                        image: "https://sample-image-url.com/giethoorn.jpg",
                        bookingUrl: "https://9292.nl/en"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 6-14°C, início da primavera, clima variável com possibilidade de chuvas.",
                        language: [
                            { phrase: "Hallo", pronunciation: "HA-lo" },
                            { phrase: "Dank je wel", pronunciation: "dank iê VEL" },
                            { phrase: "Alstublieft", pronunciation: "ALS-tu-blift" },
                            { phrase: "Waar is...?", pronunciation: "vaar IS" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+2 (5 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (adaptador necessário para tomadas brasileiras)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "GVB (metrô, bonde, ônibus). GVB Day Ticket (24h): €8,50.",
                        offlineMap: "App 'GVB' com funcionalidade offline para rotas.",
                        internetAccess: "SIM cards Lebara, Vodafone ou KPN nas lojas ou supermercados.",
                        cityTransfers: "Keukenhof: ônibus Keukenhof Express (linha 852) da Estação Central (€5,50 + entrada)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Keukenhof em plena floração e celebrações do Dia do Rei (27 de abril - verificar se coincide).",
                        food: "Experimente o arenque cru (haring), stroopwafels, bitterballen e queijos locais.",
                        freeActivities: "Free Walking Tour Amsterdam sai da Dam Square às 11h e 14h (gorjeta sugerida: €15)."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        bikeRental: "Aluguel de bicicletas: MacBike perto da estação central (€12/dia com desconto online).",
                        flowerInfo: "Keukenhof: Aberto 08:00-19:30. Comprar ingressos online para evitar filas (€19/pessoa).",
                        romanticSpots: "Passeio de barco ao pôr do sol pelos canais com serviço de queijos e vinho (€30/pessoa)."
                    }
                },
                porto: {
                    name: "Porto",
                    coordinates: { lat: 41.1579, lng: -8.6291 },
                    dates: "22/04 - 24/04", // ATUALIZADO: estadia mais longa
                    transport: {
                        from: "Amsterdam",
                        options: [
                            {
                                type: "voo",
                                company: "Múltiplas companhias (com escala)",
                                duration: "5-6h",
                                cost: 70,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Opções econômicas com antecedência, geralmente têm escala",
                                recommended: true,
                                badge: "economia"
                            },
                            {
                                type: "voo",
                                company: "Transavia/TAP (direto)",
                                duration: "3h",
                                cost: 95,
                                bookingUrl: "https://www.skyscanner.pt",
                                notes: "Voo direto, porém mais caro",
                                recommended: false,
                                badge: "tempo"
                            }
                        ]
                    },
                    activities: [
                        "Aluguel de carro econômico (95€/3 dias através de agregadores como AutoEurope)",
                        "Caves do Vinho do Porto (algumas têm degustação gratuita/econômica)",
                        "Ribeira (passeio clássico)",
                        "Ponte Dom Luís I (gratuito)",
                        "Livraria Lello (entrada: 5€, dedutível na compra de livros)",
                        "Torre dos Clérigos (subida: 6€)",
                        "Jantar na Ribeira com vista para o rio"
                    ],
                    accommodation: {
                        name: "Hostel Yes! Porto (dormitório)",
                        cost: 40,
                        bookingUrl: "https://www.yesporto.com",
                        notes: "Localização central, cozinha compartilhada (2 noites)"
                    },
                    extraDay: {
                        title: "Dia Extra em Porto (22/04-24/04)",
                        description: "Aproveitando o tempo adicional em Porto para explorar melhor a cidade e se preparar para as excursões a Foz Tua e Gerês.",
                        activities: [
                            "Mais tempo para relaxar e explorar a cidade",
                            "Possibilidade de visitar Matosinhos para experimentar os melhores peixes e mariscos",
                            "Preparação para o roteiro em Portugal"
                        ]
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 10-18°C, primavera com possibilidade de chuvas ocasionais.",
                        language: [
                            { phrase: "Olá", pronunciation: "o-LA" },
                            { phrase: "Obrigado/a", pronunciation: "o-bri-GA-do/da" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "Onde fica...?", pronunciation: "ON-de FI-ca" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+1 (4 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (mesmas da Europa Continental)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Metro do Porto e STCP (ônibus). Cartão Andante Tour 1 (24h): €7.",
                        offlineMap: "App 'Porto Offline City Map' com pontos turísticos.",
                        internetAccess: "SIM cards MEO, NOS ou Vodafone desde €10.",
                        cityTransfers: "Caves do Vinho: 10 min a pé da Ribeira, atravessando a Ponte Dom Luís I."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Feira Medieval de Santa Maria da Feira (proximidades, verificar datas).",
                        food: "Imperdíveis: Francesinha, Bacalhau à Gomes de Sá, Tripas à Moda do Porto e Vinho do Porto.",
                        freeActivities: "Free Walking Tour Porto sai da Praça da Liberdade às 10:30h (gorjeta sugerida: €10)."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        wineInfo: "Tours nas caves: Taylor's (€15), Sandeman (€13), Cálem (€14). Reservar slots matinais para menor lotação.",
                        carRental: "Levantamento do carro: preferir locadoras no centro vs. aeroporto (economiza taxa aeroportuária).",
                        romanticSpots: "Jantar com vista no Restaurante Bacalhau na margem do Douro (€50/casal com vinho)."
                    }
                },
                foztua: {
                    name: "Foz Tua (a partir do Porto)",
                    coordinates: { lat: 41.2193, lng: -7.4265 },
                    dates: "24/04 (dia)",
                    activities: [
                        "Visita à Barragem de Foz Tua",
                        "Região vinícola do Douro",
                        "Paisagens classificadas UNESCO",
                        "Passeio de barco no rio Douro (opcional: 25€)"
                    ],
                    transport: {
                        special: "Parte do percurso com carro alugado (2h de carro do Porto)"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 9-17°C, clima mais seco que no Porto, típico do interior do país.",
                        language: [
                            { phrase: "Olá", pronunciation: "o-LA" },
                            { phrase: "Obrigado/a", pronunciation: "o-bri-GA-do/da" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "Onde fica...?", pronunciation: "ON-de FI-ca" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+1 (4 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112 (cobertura de celular pode ser limitada em certas áreas do Vale do Douro)",
                        powerPlug: "Tomadas tipo C e F (mesmas da Europa Continental)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Transporte público limitado. O carro alugado é a melhor opção.",
                        offlineMap: "Baixe mapa offline da região do Douro no Google Maps pois sinal pode ser fraco.",
                        internetAccess: "Cobertura 4G intermitente nas áreas rurais e montanhosas.",
                        cityTransfers: "Barragem de Foz Tua: acessível apenas por carro ou trem histórico do Douro (verificar horários)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Possíveis festas locais em aldeias vinícolas (verificar ao chegar).",
                        food: "Experimente o cabrito assado, bôla de carne e vinho do Porto da região (Quinta local).",
                        freeActivities: "Mirantes gratuitos com vistas para os vinhedos em terraços e o rio Douro."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        bestView: "Miradouro de Casal de Loivos: uma das melhores vistas do Vale do Douro (indicado pelo Guia Michelin).",
                        foodTip: "Leve um lanche/piquenique pois restaurantes são esparsos na região.",
                        drivingTip: "Estradas sinuosas: se for dirigir, considere tomar medicamento para enjoo."
                    }
                },
                geres: {
                    name: "Gerês",
                    coordinates: { lat: 41.7186, lng: -8.1668 },
                    dates: "24/04 (noite) - 25/04",
                    activities: [
                        "Trilha Cascata do Arado (gratuita)",
                        "Ponte da Misarela (gratuita)",
                        "Miradouro da Pedra Bela (gratuito)",
                        "Lagoas naturais (gratuitas)",
                        "Piquenique na natureza (economia em refeições)"
                    ],
                    accommodation: {
                        name: "Albergue de Campo (tipo rural)",
                        cost: 50,
                        bookingUrl: "https://www.booking.com",
                        notes: "Opção com cozinha para preparar refeições"
                    },
                    transport: {
                        special: "Continuação com carro alugado (2h a partir de Foz Tua)"
                    },
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 8-16°C, clima de montanha, mais frio e úmido que nas cidades costeiras.",
                        language: [
                            { phrase: "Olá", pronunciation: "o-LA" },
                            { phrase: "Obrigado/a", pronunciation: "o-bri-GA-do/da" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "Onde fica...?", pronunciation: "ON-de FI-ca" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+1 (4 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112 (cobertura de celular pode ser limitada em áreas remotas)",
                        powerPlug: "Tomadas tipo C e F (mesmas da Europa Continental)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Transporte público limitado. Recomenda-se o carro alugado.",
                        offlineMap: "Baixe mapas de trilhas no app 'Wikiloc' antes da viagem.",
                        internetAccess: "Cobertura de internet limitada em áreas remotas, baixe mapas antecipadamente.",
                        cityTransfers: "Cascata do Arado: 25 min de carro de Vila do Gerês."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Possíveis festas locais em aldeias próximas (verificar ao chegar).",
                        food: "Pratos regionais: Cozido à Portuguesa, queijo da serra e Broa caseira.",
                        freeActivities: "Trilhas gratuitas autoguiadas - pegar mapas no centro de visitantes."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        hikingInfo: "Trilha Cascata do Arado: dificuldade média, 5km ida e volta, 2-3 horas totais, levar água e lanche.",
                        weatherAlert: "Clima montanhoso imprevisível. Levar casaco impermeável mesmo em dias aparentemente ensolarados.",
                        romanticSpots: "Pôr do sol no Miradouro Pedra Bela. Levar cobertor e garrafa de vinho verde (acesso de carro)."
                    }
                },
                lisboa_final: {
                    name: "Lisboa (Partida)",
                    coordinates: { lat: 38.7223, lng: -9.1393 },
                    dates: "26/04",
                    transport: {
                        from: "Gerês",
                        options: [
                            {
                                type: "carro",
                                company: "Carro alugado (continuação)",
                                duration: "4h30",
                                cost: 0, // Já contabilizado no aluguel
                                bookingUrl: "",
                                notes: "Saída cedo para chegar a Lisboa com tempo suficiente",
                                recommended: true,
                                badge: "tempo"
                            }
                        ]
                    },
                    activities: [
                        "Aeroporto de Lisboa para devolução do carro alugado",
                        "Tempo livre dependendo do horário do voo",
                        "Retorno ao Brasil (26/04)"
                    ],
                    // Novas informações locais
                    localInfo: {
                        weather: "Em abril: 12-20°C, primavera agradável com possibilidade de chuvas leves.",
                        language: [
                            { phrase: "Olá", pronunciation: "o-LA" },
                            { phrase: "Obrigado/a", pronunciation: "o-bri-GA-do/da" },
                            { phrase: "Por favor", pronunciation: "por fa-VOR" },
                            { phrase: "Onde fica...?", pronunciation: "ON-de FI-ca" }
                        ],
                        currency: "Euro (€1 ≈ R$5,50)",
                        timezone: "UTC+1 (4 horas a mais que Brasília)",
                        emergency: "Número de emergência: 112",
                        powerPlug: "Tomadas tipo C e F (mesmas da Europa Continental)"
                    },
                    // Informações de transporte
                    transportInfo: {
                        publicTransport: "Metro, ônibus e elétricos. Cartão Viva Viagem (€0,50) + carregamento.",
                        offlineMap: "App 'Citymapper' funciona bem em Lisboa, com opção offline.",
                        internetAccess: "Wi-Fi disponível no aeroporto e em muitos cafés.",
                        cityTransfers: "Aeroporto para centro: 20-30 min via metro (linha vermelha)."
                    },
                    // Informações culturais
                    culturalInfo: {
                        festivals: "Possíveis eventos de primavera (verificar agenda cultural).",
                        food: "Se tiver tempo: pastéis de nata, bacalhau à brás, ginjinha (licor de cereja).",
                        freeActivities: "Miradouros com vista panorâmica da cidade (gratuitos)."
                    },
                    // Informações práticas específicas
                    practicalInfo: {
                        airportTip: "Chegar com 3h de antecedência para voos intercontinentais. O aeroporto pode ter filas longas.",
                        taxRefund: "Se fez compras com Tax Free, faça o reembolso de impostos no aeroporto.",
                        lastMinute: "Se tiver 2-3 horas livres, visite o Parque das Nações próximo ao aeroporto."
                    }
                }
            },
            order: ['albufeira', 'madrid', 'valencia', 'geneva', 'pilatus', 'zurich', 'amsterdam', 'porto', 'foztua', 'geres', 'lisboa_final']
        };

        // Dados do checklist de viagem
        const packingList = {
            documents: [
                "Passaporte (validade mínima 6 meses)",
                "Cartões de crédito/débito",
                "Carteira de habilitação internacional",
                "Seguro viagem",
                "Cópias digitais dos documentos"
            ],
            clothing: [
                "Roupas leves",
                "Casaco impermeável",
                "Suéter/moletom",
                "Calçados confortáveis",
                "Roupa social básica para restaurantes"
            ],
            tech: [
                "Adaptadores de tomada (tipo C + tipo J para Suíça)",
                "Carregadores",
                "Powerbank",
                "Câmera"
            ],
            toiletries: [
                "Medicamentos pessoais",
                "Protetor solar",
                "Produtos básicos de higiene"
            ]
        };

        // Dados dos desafios românticos
        const romanticChallenges = [
            "Tirar uma foto romântica na Ponte Dom Luís I em Porto",
            "Fazer um brinde com vinho local em cada país visitado",
            "Escrever um cartão postal em cada cidade e enviá-lo para vocês mesmos",
            "Tirar uma foto beijando em frente a cada atração principal",
            "Comprar uma pequena lembrança romântica em cada país",
            "Fazer um piquenique no Vondelpark em Amsterdam",
            "Assistir ao pôr do sol juntos em Gerês"
        ];

        let map;
        let activeMarker;
        let markers = {};
        let polylines = [];

        function updateMap() {
            // Limpar marcadores e linhas existentes
            clearMapElements();

            const routeCoordinates = [];

            itineraryData.order.forEach((cityId, index) => {
                const city = itineraryData.cities[cityId];
                const coords = city.coordinates;

                // Criar marcador
                const marker = L.marker([coords.lat, coords.lng], {
                    icon: L.divIcon({
                        className: 'custom-marker',
                        iconSize: [12, 12]
                    })
                }).addTo(map);

                marker.bindPopup(`
                    <h3>${city.name}</h3>
                    <p>Data: ${city.dates}</p>
                `);

                marker.on('click', () => {
                    if (activeMarker) {
                        activeMarker.getElement().classList.remove('active');
                    }
                    marker.getElement().classList.add('active');
                    activeMarker = marker;
                    showCityInfo(cityId);
                });

                markers[cityId] = marker;
                routeCoordinates.push([coords.lat, coords.lng]);

                // Conectar com a próxima cidade
                if (index < itineraryData.order.length - 1) {
                    const nextCity = itineraryData.cities[itineraryData.order[index + 1]].coordinates;
                    const polyline = L.polyline([
                        [coords.lat, coords.lng],
                        [nextCity.lat, nextCity.lng]
                    ], {
                        color: '#3498db',
                        weight: 2,
                        opacity: 0.7,
                        dashArray: '5, 10'
                    }).addTo(map);
                    polylines.push(polyline);
                }
            });

            // Ajustar visualização
            map.fitBounds(L.latLngBounds(routeCoordinates));
        }

        function clearMapElements() {
            Object.values(markers).forEach(marker => map.removeLayer(marker));
            markers = {};
            polylines.forEach(polyline => map.removeLayer(polyline));
            polylines = [];
        }

        function showCityInfo(cityId) {
            const city = itineraryData.cities[cityId];
            if (!city) return;

            // Preparar HTML para as opções de transporte
            let transportHtml = '';
            
            if (city.transport && city.transport.options) {
                transportHtml = `
                    <div class="info-section">
                        <h4>Transporte de ${city.transport.from} para ${city.name}:</h4>
                        <div class="transport-options">
                `;
                
                city.transport.options.forEach(option => {
                    const typeClass = `transport-${option.type.toLowerCase()}`;
                    const recommendedClass = option.recommended ? 'transport-recommended' : '';
                    const badgeHtml = option.badge ? `<span class="${option.badge}-badge">${option.badge === 'economia' ? 'Mais econômico' : (option.badge === 'conforto' ? 'Mais confortável' : 'Mais rápido')}</span>` : '';
                    
                    transportHtml += `
                        <div class="transport-option ${typeClass}">
                            <h4>${getTransportTypeIcon(option.type)} ${option.type.toUpperCase()} ${badgeHtml}</h4>
                            <p><strong>Empresa:</strong> ${option.company}</p>
                            <p><strong>Duração:</strong> ${option.duration}</p>
                            <p><strong>Custo:</strong> €${option.cost}</p>
                            ${option.notes ? `<p><strong>Notas:</strong> <span class="${recommendedClass}">${option.notes}</span></p>` : ''}
                            ${option.bookingUrl ? `<a href="${option.bookingUrl}" target="_blank" class="booking-button">Reservar</a>` : ''}
                        </div>
                    `;
                });
                
                transportHtml += `
                        </div>
                    </div>
                `;
            } else if (city.transport && city.transport.special) {
                transportHtml = `
                    <div class="info-section">
                        <h4>Transporte:</h4>
                        <p>${city.transport.special}</p>
                    </div>
                `;
            }

            // Adicionar informações especiais (como tobogã ou Giethoorn)
            let specialHtml = '';
            if (city.special) {
                let specialClass = 'highlight-attraction';
                if (city.name.includes('Amsterdam')) {
                    specialClass = 'holland-highlight';
                }
                
                specialHtml = `
                    <div class="${specialClass}">
                        <h4>${city.special.title}</h4>
                        <p>${city.special.description}</p>
                        <ul>
                            ${city.special.details.map(detail => `<li>${detail}</li>`).join('')}
                        </ul>
                        <a href="${city.special.bookingUrl}" target="_blank" class="booking-button">Verificar Disponibilidade</a>
                    </div>
                `;
            }
            
            // Adicionar informações sobre o dia extra
            let extraDayHtml = '';
            if (city.extraDay) {
                extraDayHtml = `
                    <div class="extra-day">
                        <h4>${city.extraDay.title}</h4>
                        <p>${city.extraDay.description}</p>
                        <ul>
                            ${city.extraDay.activities.map(activity => `<li>${activity}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            // Adicionar destaque para Portugal
            let portugalHtml = '';
            if (city.name.includes('Porto') || city.name.includes('Gerês') || city.name.includes('Foz Tua')) {
                portugalHtml = `
                    <div class="portugal-highlight">
                        <h4>Roteiro em Portugal</h4>
                        <p>Conforme solicitado, o roteiro em Portugal foi ampliado:</p>
                        <ul>
                            <li><strong>22/04-24/04:</strong> Dois dias completos em Porto - tempo para explorar a cidade</li>
                            <li><strong>24/04:</strong> Visita a Foz Tua durante o dia → Viagem para Gerês</li>
                            <li><strong>25/04:</strong> Dia completo em Gerês</li>
                            <li><strong>26/04:</strong> Viagem para Lisboa apenas para pegar o voo de retorno</li>
                        </ul>
                        <p>Este formato otimizado permite aproveitar melhor Portugal como solicitado.</p>
                    </div>
                `;
            }
            
            // Adicionar dicas de economia
            let savingsHtml = '';
            if (city.name.includes('Porto')) {
                savingsHtml = `
                    <div class="savings-highlight">
                        <h4>Dicas de Economia</h4>
                        <p>Para manter o orçamento dentro de €2000 por pessoa:</p>
                        <ul>
                            <li>Use o cartão <strong>Andante Tour</strong> para o transporte em Porto (€7/dia para viagens ilimitadas)</li>
                            <li>Experimente os restaurantes populares com "menu do dia" (€8-12 por refeição completa)</li>
                            <li>Para o carro alugado, opte pela devolução em Porto mesmo (economiza taxa de devolução em outro local)</li>
                            <li>Leve lanches nas excursões e compre água em supermercados</li>
                        </ul>
                    </div>
                `;
            } else if (city.name.includes('Zurich') || city.name.includes('Geneva')) {
                savingsHtml = `
                    <div class="savings-highlight">
                        <h4>Dicas de Economia na Suíça</h4>
                        <p>A Suíça é cara, mas é possível economizar:</p>
                        <ul>
                            <li>Compre alimentos nos supermercados Migros ou Coop (mais baratos)</li>
                            <li>Use a água das fontes públicas (potável e gratuita)</li>
                            <li>Aproveite os passeios e atrações gratuitas (muitos mirantes e trilhas)</li>
                            <li>Passe pelo posto de turismo para pegar mapas e dicas locais gratuitas</li>
                        </ul>
                    </div>
                `;
            } else if (city.name.includes('Amsterdam')) {
                savingsHtml = `
                    <div class="savings-highlight">
                        <h4>Dicas de Economia em Amsterdam</h4>
                        <p>Para aproveitar Amsterdam sem gastar muito:</p>
                        <ul>
                            <li>Alugue bicicleta por dia inteiro em vez de transporte público (€10/dia)</li>
                            <li>Visite o Museu Van Gogh à noite de sexta-feira (horário mais barato)</li>
                            <li>Procure os restaurantes FEBO para refeições rápidas e econômicas</li>
                            <li>Prefira os albergues da zona norte (mais baratos e conectados por ferry gratuito)</li>
                        </ul>
                    </div>
                `;
            }

            // Adicionar informações locais
            let localInfoHtml = '';
            if (city.localInfo) {
                localInfoHtml = `
                    <div class="info-section">
                        <h4>Informações Locais</h4>
                        <div class="info-tabs">
                            <div class="info-tab active" onclick="showInfoTab('${cityId}-local-info', this)">Básico</div>
                            <div class="info-tab" onclick="showInfoTab('${cityId}-language', this)">Frases Úteis</div>
                            <div class="info-tab" onclick="showInfoTab('${cityId}-transport', this)">Transporte</div>
                            <div class="info-tab" onclick="showInfoTab('${cityId}-cultural', this)">Cultura</div>
                            ${city.practicalInfo ? `<div class="info-tab" onclick="showInfoTab('${cityId}-practical', this)">Dicas Práticas</div>` : ''}
                        </div>
                        
                        <div id="${cityId}-local-info" class="info-content active">
                            <div class="info-grid">
                                <div class="info-block">
                                    <h4>Clima</h4>
                                    <p>${city.localInfo.weather}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Moeda</h4>
                                    <p><span class="currency-box">${city.localInfo.currency}</span></p>
                                </div>
                                <div class="info-block">
                                    <h4>Fuso Horário</h4>
                                    <p>${city.localInfo.timezone}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Emergência e Utilities</h4>
                                    <p>${city.localInfo.emergency}</p>
                                    <p>${city.localInfo.powerPlug}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div id="${cityId}-language" class="info-content">
                            <h4>Frases Úteis em ${city.name === "Zurich" || city.name === "Pilatus" ? "Alemão Suíço" : 
                                                  city.name === "Geneva" ? "Francês" :
                                                  city.name === "Amsterdam" ? "Holandês" :
                                                  city.name.includes("Madrid") || city.name.includes("Valencia") ? "Espanhol" : "Português"}
                                               (com pronúncia para brasileiros)</h4>
                            <div class="phrase-box">
                                ${city.localInfo.language.map(phrase => `
                                    <div class="phrase-item">
                                        <strong>${phrase.phrase}:</strong> ${phrase.pronunciation}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div id="${cityId}-transport" class="info-content">
                            <div class="info-grid">
                                <div class="info-block">
                                    <h4>Transporte Público</h4>
                                    <p>${city.transportInfo.publicTransport}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Mapas Offline</h4>
                                    <p>${city.transportInfo.offlineMap}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Internet</h4>
                                    <p>${city.transportInfo.internetAccess}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Deslocamentos</h4>
                                    <p>${city.transportInfo.cityTransfers}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div id="${cityId}-cultural" class="info-content">
                            <div class="cultural-item">
                                <div class="cultural-title">Festivais e Eventos</div>
                                <p>${city.culturalInfo.festivals}</p>
                            </div>
                            <div class="cultural-item">
                                <div class="cultural-title">Gastronomia Local</div>
                                <p>${city.culturalInfo.food}</p>
                            </div>
                            <div class="cultural-item">
                                <div class="cultural-title">Experiências Gratuitas</div>
                                <p>${city.culturalInfo.freeActivities}</p>
                            </div>
                        </div>
                        
                        ${city.practicalInfo ? `
                            <div id="${cityId}-practical" class="info-content">
                                <div class="practical-info">
                                    ${Object.entries(city.practicalInfo).map(([key, value]) => `
                                        <div class="practical-title">${
                                            key === 'trainPass' ? 'Passes de Trem' : 
                                            key === 'tobogganInfo' || key === 'mountainInfo' ? 'Informações sobre Atrações' :
                                            key === 'romanticSpots' ? 'Locais Românticos' :
                                            key === 'wineInfo' ? 'Degustação de Vinhos' :
                                            key === 'carRental' ? 'Aluguel de Carro' :
                                            key === 'bikeRental' ? 'Aluguel de Bicicletas' :
                                            key === 'flowerInfo' ? 'Informações Keukenhof' :
                                            key === 'hikingInfo' ? 'Informações de Trilhas' :
                                            key === 'weatherAlert' ? 'Alerta de Clima' :
                                            key === 'bestPhoto' ? 'Melhores Fotos' :
                                            key === 'bestView' ? 'Melhor Vista' :
                                            key === 'foodTip' ? 'Dica Gastronômica' :
                                            key === 'drivingTip' ? 'Dica de Condução' :
                                            key === 'airportTip' ? 'Dica de Aeroporto' :
                                            key === 'taxRefund' ? 'Reembolso de Impostos' :
                                            key === 'lastMinute' ? 'Última Hora' : key
                                        }</div>
                                        <p>${value}</p>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            const infoHtml = `
                <div class="city-info">
                    <h3>${city.name}</h3>
                    <div class="info-section">
                        <p><strong>Datas:</strong> ${city.dates}</p>
                    </div>
                    
                    ${localInfoHtml}
                    
                    ${transportHtml}
                    
                    <div class="info-section">
                        <h4>Atividades:</h4>
                        <ul>
                            ${city.activities.map(activity => `<li>${activity}</li>`).join('')}
                        </ul>
                    </div>
                    
                    ${extraDayHtml}
                    
                    ${specialHtml}
                    
                    ${portugalHtml}
                    
                    ${savingsHtml}
                    
                    ${city.accommodation ? `
                        <div class="info-section">
                            <h4>Hospedagem:</h4>
                            <p>${city.accommodation.name}</p>
                            <p><strong>Custo:</strong> €${city.accommodation.cost}</p>
                            ${city.accommodation.notes ? `<p><small>${city.accommodation.notes}</small></p>` : ''}
                            <a href="${city.accommodation.bookingUrl}" target="_blank" class="booking-button">Reservar Hospedagem</a>
                        </div>
                    ` : ''}
                </div>
            `;

            document.getElementById('cityInfo').innerHTML = infoHtml;
        }

        function getTransportTypeIcon(type) {
            switch(type.toLowerCase()) {
                case 'trem':
                    return '🚆';
                case 'onibus':
                    return '🚌';
                case 'voo':
                    return '✈️';
                case 'carro':
                    return '🚗';
                case 'trem-onibus':
                    return '🚆/🚌';
                default:
                    return '🚢';
            }
        }

        // Função para mostrar as abas de informações locais
        function showInfoTab(tabId, button) {
            // Remover a classe active de todas as abas
            const tabContainer = button.parentElement;
            const allTabs = tabContainer.querySelectorAll('.info-tab');
            allTabs.forEach(tab => tab.classList.remove('active'));
            
            // Adicionar a classe active à aba clicada
            button.classList.add('active');
            
            // Esconder todos os conteúdos
            const parentSection = tabContainer.parentElement;
            const allContents = parentSection.querySelectorAll('.info-content');
            allContents.forEach(content => content.classList.remove('active'));
            
            // Mostrar o conteúdo correspondente à aba clicada
            document.getElementById(tabId).classList.add('active');
        }

        function showTab(tabName) {
            // Atualizar estado das abas
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-tab') === tabName) {
                    btn.classList.add('active');
                }
            });

            const mapView = document.getElementById('mapView');
            const fullItinerary = document.getElementById('fullItinerary');
            const packingList = document.getElementById('packingList');
            const romanticChallenges = document.getElementById('romanticChallenges');

            // Esconder todos os elementos
            mapView.style.display = 'none';
            fullItinerary.style.display = 'none';
            packingList.style.display = 'none';
            romanticChallenges.style.display = 'none';

            // Atualizar visibilidade das seções
            switch(tabName) {
                case 'map':
                    mapView.style.display = 'flex';
                    break;
                    
                case 'full-itinerary':
                    fullItinerary.style.display = 'block';
                    showFullItinerary(); // Mostrar roteiro completo
                    break;
                    
                case 'summary':
                    fullItinerary.style.display = 'block';
                    showFinancialSummary(); // Mostrar resumo financeiro
                    break;
                    
                case 'packing':
                    packingList.style.display = 'block'; // Mostrar checklist de viagem
                    break;
                    
                case 'romantic':
                    romanticChallenges.style.display = 'block'; // Mostrar desafios românticos
                    break;
            }
        }

        function showFullItinerary() {
            let itineraryHtml = '';
            
            itineraryData.order.forEach(cityId => {
                const city = itineraryData.cities[cityId];
                
                // Preparar HTML para as opções de transporte
                let transportHtml = '';
                
                if (city.transport && city.transport.options) {
                    transportHtml = `
                        <div class="info-section">
                            <h4>Transporte de ${city.transport.from} para ${city.name}:</h4>
                            <div class="transport-options">
                    `;
                    
                    // Encontrar a opção recomendada
                    const recommendedOption = city.transport.options.find(option => option.recommended);
                    
                    if (recommendedOption) {
                        const typeClass = `transport-${recommendedOption.type.toLowerCase()}`;
                        const badgeHtml = recommendedOption.badge ? `<span class="${recommendedOption.badge}-badge">${recommendedOption.badge === 'economia' ? 'Mais econômico' : (recommendedOption.badge === 'conforto' ? 'Mais confortável' : 'Mais rápido')}</span>` : '';
                        
                        transportHtml += `
                            <div class="transport-option ${typeClass}">
                                <h4>${getTransportTypeIcon(recommendedOption.type)} ${recommendedOption.type.toUpperCase()} ${badgeHtml}</h4>
                                <p><strong>Empresa:</strong> ${recommendedOption.company}</p>
                                <p><strong>Duração:</strong> ${recommendedOption.duration}</p>
                                <p><strong>Custo:</strong> €${recommendedOption.cost}</p>
                                ${recommendedOption.notes ? `<p><strong>Notas:</strong> <span class="transport-recommended">${recommendedOption.notes}</span></p>` : ''}
                                ${recommendedOption.bookingUrl ? `<a href="${recommendedOption.bookingUrl}" target="_blank" class="booking-button">Reservar</a>` : ''}
                            </div>
                        `;
                    }
                    
                    transportHtml += `
                            </div>
                            <p><small>Para ver todas as opções de transporte, clique na cidade no mapa.</small></p>
                        </div>
                    `;
                } else if (city.transport && city.transport.special) {
                    transportHtml = `
                        <div class="info-section">
                            <h4>Transporte:</h4>
                            <p>${city.transport.special}</p>
                        </div>
                    `;
                }

                // Adicionar informações especiais (como tobogã ou Giethoorn)
                let specialHtml = '';
                if (city.special) {
                    let specialClass = 'highlight-attraction';
                    if (city.name.includes('Amsterdam')) {
                        specialClass = 'holland-highlight';
                    }
                    
                    specialHtml = `
                        <div class="${specialClass}">
                            <h4>${city.special.title}</h4>
                            <p>${city.special.description}</p>
                            <ul>
                                ${city.special.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                            <a href="${city.special.bookingUrl}" target="_blank" class="booking-button">Verificar Disponibilidade</a>
                        </div>
                    `;
                }
                
                // Adicionar informações sobre o dia extra
                let extraDayHtml = '';
                if (city.extraDay) {
                    extraDayHtml = `
                        <div class="extra-day">
                            <h4>${city.extraDay.title}</h4>
                            <p>${city.extraDay.description}</p>
                            <ul>
                                ${city.extraDay.activities.map(activity => `<li>${activity}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                // Adicionar destaque para Portugal
                let portugalHtml = '';
                if (city.name.includes('Porto') || city.name.includes('Gerês') || city.name.includes('Foz Tua')) {
                    portugalHtml = `
                        <div class="portugal-highlight">
                            <h4>Roteiro em Portugal</h4>
                            <p>Conforme solicitado, o roteiro em Portugal foi ampliado:</p>
                            <ul>
                                <li><strong>22/04-24/04:</strong> Dois dias completos em Porto - tempo para explorar a cidade</li>
                                <li><strong>24/04:</strong> Visita a Foz Tua durante o dia → Viagem para Gerês</li>
                                <li><strong>25/04:</strong> Dia completo em Gerês</li>
                                <li><strong>26/04:</strong> Viagem para Lisboa apenas para pegar o voo de retorno</li>
                            </ul>
                            <p>Este formato otimizado permite aproveitar melhor Portugal como solicitado.</p>
                        </div>
                    `;
                }

                // Adicionar informações locais no roteiro completo
                let localInfoHtml = '';
                if (city.localInfo) {
                    localInfoHtml = `
                        <div class="info-section">
                            <h4>Informações Essenciais: ${city.name}</h4>
                            <div class="info-grid">
                                <div class="info-block">
                                    <h4>Clima</h4>
                                    <p>${city.localInfo.weather}</p>
                                </div>
                                <div class="info-block">
                                    <h4>Frases Úteis</h4>
                                    <p>${city.localInfo.language[0].phrase}: ${city.localInfo.language[0].pronunciation}</p>
                                    <p>${city.localInfo.language[1].phrase}: ${city.localInfo.language[1].pronunciation}</p>
                                </div>
                            </div>
                            
                            <div class="cultural-item">
                                <div class="cultural-title">Gastronomia Imperdível</div>
                                <p>${city.culturalInfo.food}</p>
                            </div>
                            
                            ${city.practicalInfo ? `
                                <div class="practical-info">
                                    <div class="practical-title">Dica Especial</div>
                                    <p>${Object.values(city.practicalInfo)[0]}</p>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }

                // Adicionar dicas de economia
                let savingsHtml = '';
                if (city.name.includes('Porto')) {
                    savingsHtml = `
                        <div class="savings-highlight">
                            <h4>Dicas de Economia</h4>
                            <p>Para manter o orçamento dentro de €2000 por pessoa:</p>
                            <ul>
                                <li>Use o cartão <strong>Andante Tour</strong> para o transporte em Porto (€7/dia para viagens ilimitadas)</li>
                                <li>Experimente os restaurantes populares com "menu do dia" (€8-12 por refeição completa)</li>
                                <li>Para o carro alugado, opte pela devolução em Porto mesmo (economiza taxa de devolução em outro local)</li>
                                <li>Leve lanches nas excursões e compre água em supermercados</li>
                            </ul>
                        </div>
                    `;
                }
                
                itineraryHtml += `
                    <div class="itinerary-day">
                        <h3>${city.name} - ${city.dates}</h3>
                        
                        ${localInfoHtml}
                        
                        ${transportHtml}
                        
                        <div class="info-section">
                            <h4>Atividades:</h4>
                            <ul>
                                ${city.activities.map(activity => `<li>${activity}</li>`).join('')}
                            </ul>
                        </div>
                        
                        ${extraDayHtml}
                        
                        ${specialHtml}
                        
                        ${portugalHtml}
                        
                        ${savingsHtml}
                        
                        ${city.accommodation ? `
                            <div class="info-section">
                                <h4>Hospedagem:</h4>
                                <p>${city.accommodation.name} - €${city.accommodation.cost}</p>
                                ${city.accommodation.notes ? `<p><small>${city.accommodation.notes}</small></p>` : ''}
                                <a href="${city.accommodation.bookingUrl}" target="_blank" class="booking-button">Reservar</a>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            // Resumo das mudanças do roteiro
            const roteiroDiff = `
                <div class="portugal-highlight">
                    <h4>Roteiro Final: Estadia Estendida em Porto</h4>
                    <p>O roteiro foi ajustado para incluir duas noites em Porto (22/04 para 24/04) conforme solicitado, com a realocação de noites de outras cidades.</p>
                    
                    <h5 style="margin-top: 15px; margin-bottom: 8px;">Cronograma Final Atualizado:</h5>
                    <ul>
                        <li><strong>12-14/04:</strong> Albufeira (Casamento)</li>
                        <li><strong>14/04:</strong> Madrid (apenas visita)</li>
                        <li><strong>14-16/04:</strong> Valencia (2 noites)</li>
                        <li><strong>16-18/04:</strong> Geneva (2 noites, incluindo tobogã)</li>
                        <li><strong>18-20/04:</strong> Zurich (2 noites)</li>
                        <li><strong>20-22/04:</strong> Amsterdam (2 noites, incluindo Keukenhof e Giethoorn)</li>
                        <li><strong>22-24/04:</strong> Porto (2 noites)</li>
                        <li><strong>24-25/04:</strong> Gerês (1 noite, com passagem por Foz Tua)</li>
                        <li><strong>26/04:</strong> Lisboa (apenas para pegar o voo)</li>
                    </ul>
                    
                    <p style="margin-top: 15px;"><strong>Novas datas:</strong> Reduziu-se 1 dia em Zurich (até 20/04 em vez de 21/04) e adiantou-se a estadia em Amsterdam (20/04-22/04) para aumentar o tempo em Porto (22/04-24/04).</p>
                </div>
            `;
            
            // Calcular custos para o roteiro atual
            const costs = calculateTotalCosts();
            const totalBudget = 1000; // Orçamento definido por pessoa
            // Como é um casal, multiplicamos o orçamento por 2
            const totalCouplesBudget = totalBudget * 2;
            const budgetRemaining = totalCouplesBudget - costs.totalCost;
            const budgetPercentage = (costs.totalCost / totalCouplesBudget) * 100;
            
            const budgetClass = budgetRemaining >= 0 ? 'budget-within' : 'budget-over';
            const budgetOverviewClass = budgetRemaining >= 0 ? '' : 'over-budget';
            
            document.getElementById('fullItinerary').innerHTML = `
                <h2 style="text-align: center; margin-bottom: 20px;">Roteiro Final Lua de Mel 2025</h2>
                
                <div class="budget-overview ${budgetOverviewClass}">
                    <h3>Orçamento Total (Casal): €${totalCouplesBudget}</h3>
                    <div class="budget-meter">
                        <div class="budget-fill ${budgetClass}" style="width: ${Math.min(budgetPercentage, 100)}%;"></div>
                    </div>
                    <p><strong>Custo Estimado:</strong> €${costs.totalCost}</p>
                    <p><strong>${budgetRemaining >= 0 ? 'Saldo Restante' : 'Excedente'}: </strong> 
                       €${Math.abs(budgetRemaining).toFixed(2)} ${budgetRemaining >= 0 ? '✅' : '❌'}</p>
                </div>
                
                ${roteiroDiff}
                
                <div class="savings-highlight">
                    <h4>Principais Economias no Roteiro Atualizado</h4>
                    <p>Para adequar o orçamento ao valor de €2.000 por pessoa, foram feitas as seguintes modificações:</p>
                    <ul>
                        <li><strong>Transporte:</strong> Opção por ônibus e voos com conexão quando possível (€310 de economia)</li>
                        <li><strong>Hospedagem:</strong> Dormitórios maiores, Couchsurfing e Airbnb compartilhado (€265 de economia)</li>
                        <li><strong>Alimentação:</strong> Preparo de refeições nos alojamentos e compras em supermercados (€210 de economia)</li>
                        <li><strong>Atrações:</strong> Ingressos com desconto online e alternativas gratuitas (€150 de economia)</li>
                        <li><strong>Extras:</strong> Foco nas experiências essenciais (€150 de economia)</li>
                    </ul>
                    <p>Total de economia: €1.085 para o casal, permitindo manter todos os destinos dentro do orçamento.</p>
                </div>
                
                ${itineraryHtml}
                
                <div class="cost-summary">
                    <h3>Resumo Financeiro (Para o Casal)</h3>
                    <div class="cost-item">
                        <span>Transportes:</span>
                        <span>€${costs.transport}</span>
                    </div>
                    <div class="cost-item">
                        <span>Hospedagem:</span>
                        <span>€${costs.accommodation}</span>
                    </div>
                    <div class="cost-item">
                        <span>Alimentação:</span>
                        <span>€${costs.food}</span>
                    </div>
                    <div class="cost-item">
                        <span>Atrações (incluindo Tobogã e Giethoorn):</span>
                        <span>€${costs.attractions}</span>
                    </div>
                    <div class="cost-item">
                        <span>Extras:</span>
                        <span>€${costs.extras}</span>
                    </div>
                    <div class="total-cost">
                        <span>Total para o Casal:</span>
                        <span>€${costs.totalCost}</span>
                    </div>
                    <div class="total-cost">
                        <span>Custo por Pessoa:</span>
                        <span>€${Math.round(costs.totalCost / 2)}</span>
                    </div>
                </div>
            `;
        }

        function calculateTotalCosts() {
            let transportCost = 0;
            let accommodationCost = 0;
            const totalDays = 15; // Número de dias da viagem
            
            // Calcular custos de transporte
            itineraryData.order.forEach(cityId => {
                const city = itineraryData.cities[cityId];
                if (city.transport && city.transport.options) {
                    // Encontrar a opção recomendada para cada trecho
                    const recommendedOption = city.transport.options.find(option => option.recommended);
                    
                    if (recommendedOption) {
                        // Multiplicar por 2 para o casal
                        transportCost += recommendedOption.cost * 2;
                    }
                }
            });
            
            // Adicionar o custo do aluguel de carro
            transportCost += 95; // 95€ para 3 dias de aluguel (opção econômica)
            
            // Calcular custos de hospedagem (já é o preço do quarto para o casal)
            itineraryData.order.forEach(cityId => {
                const city = itineraryData.cities[cityId];
                if (city.accommodation) {
                    // Adicionar apenas hospedagens que precisam ser pagas
                    accommodationCost += city.accommodation.cost;
                }
            });
            
            // Estimativas para alimentação, atrações e extras PARA DUAS PESSOAS
            const foodCostPerDay = 18; // 18€ por pessoa por dia (economizando)
            const foodCost = totalDays * foodCostPerDay * 2; // Para duas pessoas
            
            // Atrações principais (para duas pessoas)
            const attractionsCost = 2 * (
                0 + // Bernabéu (apenas exterior, gratuito)
                35 + // Oceanográfico (com desconto)
                70 + // Tobogã Suíço (pacote básico)
                16 + // Keukenhof (com desconto)
                40 + // Giethoorn (transporte público)
                30   // Outras atrações com descontos
            );
            
            const extrasCost = totalDays * 5 * 2 / 4; // Reduzido drasticamente para 25% do valor original
            
            // Custo total
            const totalCost = transportCost + accommodationCost + foodCost + attractionsCost + extrasCost;
            
            return {
                transport: Math.round(transportCost),
                accommodation: Math.round(accommodationCost),
                food: Math.round(foodCost),
                attractions: Math.round(attractionsCost),
                extras: Math.round(extrasCost),
                totalCost: Math.round(totalCost)
            };
        }

        function showFinancialSummary() {
            const costs = calculateTotalCosts();
            const totalBudget = 1000; // Orçamento definido por pessoa
            const totalCouplesBudget = totalBudget * 2;
            
            // Dados para gráficos
            const categoryLabels = ['Transportes', 'Hospedagem', 'Alimentação', 'Atrações', 'Extras'];
            const categoryData = [costs.transport, costs.accommodation, costs.food, costs.attractions, costs.extras];
            const categoryColors = ['#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6'];
            
            // Dados para gráfico de cidades
            const cityCosts = [];
            itineraryData.order.forEach(cityId => {
                const city = itineraryData.cities[cityId];
                let cityTotal = 0;
                
                // Adicionar custo de hospedagem
                if (city.accommodation) {
                    cityTotal += city.accommodation.cost;
                }
                
                // Adicionar custo de transporte
                if (city.transport && city.transport.options) {
                    const recommendedOption = city.transport.options.find(option => option.recommended);
                    if (recommendedOption) {
                        cityTotal += recommendedOption.cost * 2; // Para o casal
                    }
                }
                
                // Adicionar estimativa de gasto diário
                const dailyCost = cityId === 'porto' ? 36 * 2 + 95 : 36 * 2; // Porto inclui aluguel do carro, *2 para o casal
                cityTotal += dailyCost;
                
                // Adicionar custo de atrações especiais
                if (city.name.includes("Madrid")) {
                    cityTotal += 0 * 2; // Bernabéu exterior (gratuito)
                } else if (city.name.includes("Valencia")) {
                    cityTotal += 35 * 2; // Oceanográfico com desconto
                } else if (city.special && city.name.includes("Geneva") || city.name.includes("Pilatus")) {
                    cityTotal += 70 * 2; // Tobogã com pacote básico
                } else if (city.name.includes("Amsterdam")) {
                    cityTotal += (16 + 40) * 2; // Keukenhof + Giethoorn (transporte público)
                }
                
                cityCosts.push({
                    name: city.name,
                    cost: cityTotal
                });
            });
            
            // Preparar resumo por cidade
            const citySummaryHtml = cityCosts.map(city => `
                <div class="cost-item">
                    <span>${city.name}:</span>
                    <span>€${city.cost.toFixed(2)}</span>
                </div>
            `).join('');
            
            // Verificar se o orçamento é suficiente
            const budgetRemaining = totalCouplesBudget - costs.totalCost;
            const budgetPercentage = (costs.totalCost / totalCouplesBudget) * 100;
            const budgetClass = budgetRemaining >= 0 ? 'budget-within' : 'budget-over';
            const budgetOverviewClass = budgetRemaining >= 0 ? '' : 'over-budget';
            
            document.getElementById('fullItinerary').innerHTML = `
                <h2 style="text-align: center; margin-bottom: 20px;">Resumo Financeiro - Roteiro Final</h2>
                
                <div class="budget-overview ${budgetOverviewClass}">
                    <h3>Orçamento Total (Casal): €${totalCouplesBudget}</h3>
                    <div class="budget-meter">
                        <div class="budget-fill ${budgetClass}" style="width: ${Math.min(budgetPercentage, 100)}%;"></div>
                    </div>
                    <p><strong>Custo Estimado:</strong> €${costs.totalCost.toFixed(2)}</p>
                    <p><strong>${budgetRemaining >= 0 ? 'Saldo Restante' : 'Excedente'}: </strong> 
                       €${Math.abs(budgetRemaining).toFixed(2)} ${budgetRemaining >= 0 ? '✅' : '❌'}</p>
                </div>
                
                <div class="savings-highlight">
                    <h4>Economia Total no Roteiro Otimizado</h4>
                    <p>Comparação entre o roteiro original e o otimizado:</p>
                    
                    <table class="comparison-table">
                        <tr>
                            <th>Categoria</th>
                            <th>Valor Original (€)</th>
                            <th>Valor Otimizado (€)</th>
                            <th>Economia (€)</th>
                        </tr>
                        <tr>
                            <td>Transporte</td>
                            <td>1,180</td>
                            <td>${costs.transport}</td>
                            <td>${1180 - costs.transport}</td>
                        </tr>
                        <tr>
                            <td>Hospedagem</td>
                            <td>675</td>
                            <td>${costs.accommodation}</td>
                            <td>${675 - costs.accommodation}</td>
                        </tr>
                        <tr>
                            <td>Alimentação</td>
                            <td>750</td>
                            <td>${costs.food}</td>
                            <td>${750 - costs.food}</td>
                        </tr>
                        <tr>
                            <td>Atrações</td>
                            <td>430</td>
                            <td>${costs.attractions}</td>
                            <td>${430 - costs.attractions}</td>
                        </tr>
                        <tr>
                            <td>Extras</td>
                            <td>200</td>
                            <td>${costs.extras}</td>
                            <td>${200 - costs.extras}</td>
                        </tr>
                        <tr class="highlight-row">
                            <td><strong>TOTAL</strong></td>
                            <td><strong>3,235</strong></td>
                            <td><strong>${costs.totalCost}</strong></td>
                            <td><strong>${3235 - costs.totalCost}</strong></td>
                        </tr>
                    </table>
                    
                    <p style="margin-top: 15px;"><strong>Custo por pessoa:</strong> €${Math.round(costs.totalCost / 2)} (dentro do orçamento de €2.000/pessoa)</p>
                </div>
                
                <div class="portugal-highlight">
                    <h4>Distribuição de Custos no Roteiro Atualizado</h4>
                    <p>O roteiro final com estadia estendida em Porto tem a seguinte distribuição de custos:</p>
                    
                    <table class="comparison-table">
                        <tr>
                            <th>Região</th>
                            <th>Duração</th>
                            <th>Custo Aproximado</th>
                            <th>Destaques</th>
                        </tr>
                        <tr>
                            <td>Espanha</td>
                            <td>2 noites</td>
                            <td>€270</td>
                            <td>Madrid, Oceanográfico</td>
                        </tr>
                        <tr>
                            <td>Suíça</td>
                            <td>4 noites</td>
                            <td>€950</td>
                            <td>Tobogã alpino, Geneva</td>
                        </tr>
                        <tr>
                            <td>Holanda</td>
                            <td>2 noites</td>
                            <td>€410</td>
                            <td>Keukenhof, Giethoorn</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Portugal</td>
                            <td>3 noites</td>
                            <td>€390</td>
                            <td>Porto (2 noites), Foz Tua, Gerês</td>
                        </tr>
                    </table>
                    
                    <p>A Suíça ainda representa o maior custo do roteiro devido aos preços mais elevados no país, mas as economias aplicadas permitiram aumentar o tempo em Portugal.</p>
                </div>
                
                <div class="cost-charts">
                    <div class="chart-container">
                        <h3>Distribuição de Custos por Categoria</h3>
                        <canvas id="categoriesChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3>Custo por Destino</h3>
                        <canvas id="citiesChart"></canvas>
                    </div>
                </div>
                
                <div class="city-info">
                    <h3>Resumo de Custos por Categoria (Para o Casal)</h3>
                    <div class="cost-item">
                        <span>Transportes:</span>
                        <span>€${costs.transport.toFixed(2)}</span>
                    </div>
                    <div class="cost-item">
                        <span>Hospedagem:</span>
                        <span>€${costs.accommodation.toFixed(2)}</span>
                    </div>
                    <div class="cost-item">
                        <span>Alimentação:</span>
                        <span>€${costs.food.toFixed(2)}</span>
                    </div>
                    <div class="cost-item">
                        <span>Atrações:</span>
                        <span>€${costs.attractions.toFixed(2)}</span>
                    </div>
                    <div class="cost-item">
                        <span>Extras:</span>
                        <span>€${costs.extras.toFixed(2)}</span>
                    </div>
                    <div class="total-cost">
                        <span>Total para o Casal:</span>
                        <span>€${costs.totalCost.toFixed(2)}</span>
                    </div>
                    <div class="total-cost">
                        <span>Custo por Pessoa:</span>
                        <span>€${Math.round(costs.totalCost / 2).toFixed(2)}</span>
                    </div>
                </div>
                
                <div class="city-info">
                    <h3>Resumo de Custos por Cidade</h3>
                    ${citySummaryHtml}
                </div>
                
                <div class="savings-highlight">
                    <h3>Dicas Gerais para Economizar</h3>
                    <ul>
                        <li><strong>Reservas antecipadas:</strong> Reserve todos os transportes e hospedagens com 3+ meses de antecedência</li>
                        <li><strong>Alimentação:</strong> Prepare café da manhã e algumas refeições nos alojamentos (economia de 30-40%)</li>
                        <li><strong>Água:</strong> Leve garrafa reutilizável e reabasteça em fontes públicas (especialmente na Suíça)</li>
                        <li><strong>Souvenirs:</strong> Defina um limite de gastos antes da viagem (ex: €50 por pessoa)</li>
                        <li><strong>Cartões turísticos:</strong> Avalie se vale a pena em cada cidade (nem sempre são econômicos)</li>
                        <li><strong>Voos:</strong> Use modo anônimo ao pesquisar e verifique datas alternativas</li>
                        <li><strong>Wi-Fi:</strong> Baixe mapas offline antes da viagem para economizar em dados móveis</li>
                    </ul>
                </div>
            `;
            
            // Criar gráficos após o HTML estar pronto
            setTimeout(() => {
                createCategoryChart(categoryLabels, categoryData, categoryColors);
                createCityChart(cityCosts);
            }, 100);
        }

        function createCategoryChart(labels, data, colors) {
            const ctx = document.getElementById('categoriesChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const percentage = Math.round((value / context.dataset.data.reduce((a, b) => a + b, 0)) * 100);
                                    return `${label}: €${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function createCityChart(cityCosts) {
            const ctx = document.getElementById('citiesChart').getContext('2d');
            const cityNames = cityCosts.map(city => city.name.split(' ')[0]); // Primeiro nome apenas para legibilidade
            const cityValues = cityCosts.map(city => city.cost);
            const backgroundColors = cityCosts.map((city, index) => {
                if (city.name.includes('Amsterdam')) {
                    return '#3498db'; // Azul para destacar Amsterdam
                } else if (city.name.includes('Zurich') || city.name.includes('Geneva')) {
                    return '#9b59b6'; // Roxo para destinos suíços
                } else if (city.name.includes('Porto') || city.name.includes('Gerês')) {
                    return '#e74c3c'; // Vermelho para destinos portugueses
                }
                const hue = (index * 30) % 360;
                return `hsl(${hue}, 70%, 60%)`;
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: cityNames,
                    datasets: [{
                        label: 'Custo por Cidade (€)',
                        data: cityValues,
                        backgroundColor: backgroundColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Custo (€)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Contador regressivo para a lua de mel
        function updateCountdown() {
            const departureDate = new Date('2025-04-12T00:00:00');
            const now = new Date();
            const diff = departureDate - now;
            
            // Calcular dias restantes
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            
            // Atualizar o contador
            const countdownElement = document.getElementById('countdown');
            if (countdownElement) {
                countdownElement.textContent = days > 0 ? days : 0;
            }
        }

        // Inicializar o mapa quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Atualizar o contador regressivo
            updateCountdown();
            setInterval(updateCountdown, 86400000); // Atualizar uma vez por dia
            
            // Verificar se a biblioteca Leaflet foi carregada
            function initMap() {
                if (typeof L !== 'undefined') {
                    map = L.map('map').setView([45.0, 10.0], 5);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        maxZoom: 19,
                        attribution: '© OpenStreetMap contributors'
                    }).addTo(map);
                    updateMap();
                } else {
                    // Se o Leaflet ainda não estiver carregado, tente novamente em 100ms
                    setTimeout(initMap, 100);
                }
            }
            
            initMap();
        });
    </script>
</body>
</html>
